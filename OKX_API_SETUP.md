# OKX API 配置指南

## ✅ API配置已更新

### 当前配置
```
API Key: a39500b9-5042-4bb5-a1f8-461a10c6db27
Secret Key: 6805CEE6B3EA6A15A39E9A51DC571C8E
Passphrase: 123abc$74531ABC
权限: 读取/交易
```

---

## ⚠️ 需要配置IP白名单

### 错误信息
```
Your IP 43.134.38.231 is not included in your API key's IP whitelist
```

### 解决方案

#### 步骤1: 登录OKX
1. 访问 https://www.okx.com
2. 使用账号登录: ronalzhang@yahoo.com

#### 步骤2: 进入API管理
1. 点击右上角头像
2. 选择 "API"
3. 找到API Key: `a39500b9-5042-4bb5-a1f8-461a10c6db27`

#### 步骤3: 添加IP白名单
1. 点击 "编辑" 或 "IP白名单"
2. 添加服务器IP: `43.134.38.231`
3. 保存设置

#### 步骤4: 验证
配置完成后，系统会自动重新连接OKX，无需重启服务。

---

## 📊 配置完成后的效果

### 数据采集
- ✅ Binance: 正常
- ✅ Bitget: 正常
- ✅ OKX: 正常（配置IP白名单后）

### 多交易所功能
- 实时价格对比
- 套利机会识别
- 三交易所数据完整

---

## 🔧 验证方法

配置完成后，可以通过以下方式验证：

### 方法1: 查看前端
访问 http://43.134.38.231:8060
- 进入 "多交易所监控" 页面
- 查看OKX数据是否正常显示

### 方法2: 查看日志
```bash
ssh ubuntu@43.134.38.231
pm2 logs jesse-trading-system | grep okx
```

应该看到：
```
✅ 获取了 100 条 okx BTC/USDT 数据
```

而不是：
```
❌ 获取 okx BTC/USDT 数据失败
```

---

## 💡 注意事项

### 安全建议
1. **只添加服务器IP**: 43.134.38.231
2. **不要使用0.0.0.0/0**: 这会允许所有IP访问
3. **定期检查**: 确保只有授权IP在白名单中

### 权限说明
- **读取**: 获取市场数据、账户信息
- **交易**: 下单、撤单（当前验证模式不使用）
- **提现**: 不需要（建议关闭）

---

## 📞 需要帮助？

如果配置过程中遇到问题：
1. 确认登录的是正确的OKX账号
2. 确认API Key是: `a39500b9-5042-4bb5-a1f8-461a10c6db27`
3. 确认添加的IP是: `43.134.38.231`
4. 保存后等待1-2分钟生效

---

## 🎯 配置完成检查清单

- [ ] 登录OKX账号
- [ ] 找到API Key: a39500b9-5042-4bb5-a1f8-461a10c6db27
- [ ] 添加IP白名单: 43.134.38.231
- [ ] 保存设置
- [ ] 等待1-2分钟
- [ ] 检查前端OKX数据
- [ ] 检查日志确认正常

完成后，系统将能够从三个交易所获取完整的市场数据！
